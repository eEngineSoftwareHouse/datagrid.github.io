
<html lang="pl">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js"></script>
    <script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.0/languages/php.min.js"></script>
    <title>DataGrid</title>
</head>
<body>
<div class="container">
    <h1 class="mt-5">
        DataGrid
    </h1>

    <p>
        Celem zadania jest wykonanie implementacji, wcześniej zaprojektowanej biblioteki do tworzenia DataGrid.
        DataGrid powinien renderować się w HTML i korzystać z klass CSS dostępnych w frameworku Bootstrap 3.
        Projekt musi działać na PHP 7.3 lub 7.4.
    </p>
    <p>
        DataGrid ma za zadanie przedstawiać surowe dane, dostarczone w tablicy PHP, w postaci automatycznie formatowanej
        tabeli HTML. Tabela ma klikalne nagłówki kolumn. Kliknięcie takiego nagłówka, powoduje posortowanie wierszy rosnąco.
        Kolejne kliknięcia zmieniają sortowanie na malejące, a następne wyłączają sortowanie.
        Ilość wyświetlanych wierszy jest ograniczona. Pod tabelą znajduje się pagniacja.
        Klikanie w poszczególne strony pagniacji, powduje przejścia na te strony.
    </p>

    <h3>Zasady oceniania projektu</h3>

    <p>
        Warunki konieczne muszą zostać spełnione.
        Drobne niedociągnięcia w pozostałych, będą skutkowały obniżeniemi liości punktów o połowę.
    </p>

    <p>
        W każdy miejscu gdzie mowa o "błędach" - mam na myśli o notice, warning, error i critical error w PHP.
        Nie należy tych błędów mylić, z komunikatami o błędach pokazywanymi użytkownikowi - te są mile widziane.
    </p>

    <table class="table">
        <thead>
        <tr>
            <th>L.p.</th>
            <th>Opis</th>
            <th>Punkty</th>
        </tr>
        </thead>
        <tbody>
        <tr><td>1.</td><td>Uruchomienie kodu nie powoduje błędów na PHP 7.3 lub 7.4</td><td>Warunek konieczny</td><tr><tr><td>2.</td><td>Implementacja podstawego interfejsu biblioteki</td><td>Warunek konieczny</td><tr><tr><td>3.</td><td>Formatowanie kodu zgodne z PSR-12</td><td>0 / 500 / 1000 pkt</td><tr><tr><td>4.</td><td>Ogólna czytelnośc i ekspresyjność kodu</td><td>0 / 500 / 1000 pkt</td><tr><tr><td>5.</td><td>Przestrzeganie zasady DRY (szczególnie DateType)</td><td>0 / 350 / 700 pkt</td><tr><tr><td>6.</td><td>Przestrzeganie zasad SOLID</td><td>0 / 500 / 1000 pkt</td><tr><tr><td>7.</td><td>Przestrzeganie zasad enkapsulacji, ukrywanie szczegółów implementacji</td><td>0 / 250 / 500 pkt</td><tr><tr><td>8.</td><td>W miejsce zwykłego dziedziczenia, użyte dziedzicenie przez kompozycję</td><td>0 / 1000 pkt</td><tr><tr><td>9.</td><td>Biblioteka korzysta tylko i wyłącznie z obiektów Immutable</td><td>0 / 500 / 1000 pkt</td><tr><tr><td>10.</td><td>Użycie silnego typowania, wszędzie gdzie być powinno</td><td>0 / 250 / 500 pkt</td><tr><tr><td>11.</td><td>MoneyType - poprawnie działająca waluta PLN i USD</td><td>-500 / 300 pkt</td><tr><tr><td>12.</td><td>MoneyType - poprawnie działająca waluta BHD</td><td>0 / 500 pkt</td><tr><tr><td>13.</td><td>Render - brakujące komórki w wierszach nie powodują błędów</td><td>-500 / 200 pkt</td><tr><tr><td>14.</td><td>Render - losowe ciągi znaków w komórkach nie powodują błędów</td><td>-500 / 200 pkt</td><tr><tr><td>15.</td><td>Render - losowe typy danych w komórkach nie powodują błędów</td><td>-500  / 200 pkt</td><tr><tr><td>16.</td><td>Render - mimo braku błędów, użytkownik widzi gdzie zostały wprowadzone błędne dane</td><td>0 / 750 pkt</td><tr><tr><td>17.</td><td>Działająca paginacja</td><td>-1000 / 1000 pkt</td><tr><tr><td>18.</td><td>Działająca pagniacja łącznie z sortowaniem</td><td>-250 / 500 pkt</td><tr><tr><td>19.</td><td>Ikona sortowania w nagłówku pokazująca kierunek sortowania</td><td>0 / 350 pkt</td><tr><tr><td>20.</td><td>Klikanie w kolumny powoduje sortowanie naprzemienie:  ASC / DESC / wyłączenie sortowania</td><td>0 / 750 pkt</td><tr><tr><td>21.</td><td>Sortowanie uwzględa różne mechanizmy sortowania w zależności od typu danych</td><td>0 / 1000 pkt</td><tr><tr><td>22.</td><td>Paginacja - obsłużenie sytuacji, w której użytkownik chciałby wyrenderować stronę która jest poza dostępnym zakresem</td><td>-500 / 100 pkt</td><tr><tr><td>23.</td><td>Użycie nonbraking space w formatowaniu typów</td><td>0 / 100 pkt</td><tr><tr><td>24.</td><td>Testy jednostkowe</td><td>do 2000 pkt</td><tr><tr><td>25.</td><td>Stworzenie dodatkowej implementacji interfejsu DataGrid dla CLI</td><td>do 4000 pkt</td><tr>        </tbody>
    </table>

    <h2>1. Podstawowy interfejs biblioteki</h2>

    <pre>
<code class="php">
&lt;?php

interface DataType
{
    /**
     * Formatuje dane dla danego typu.
     */
    public function format(string $value): string;
}

interface Column
{
    /**
     * Zmienia tytuł kolumny, który będzie widoczny jako nagłówek.
     */
    public function withLabel(string $label): Column;

    public function getLabel(): string;

    /**
     * Ustawia typ danych dla kolumny.
     */
    public function withDataType(DataType $type): Column;

    public function getDataType(): DateType;

    /**
     * Ustawienie wyrównania treści znajdujących się w kolumnie.
     */
    public function withAlign(string $align): Column;

    public function getAlign(): string;
}

interface Config
{
    /**
     * Dodaje nową kolumną do DataGrid.
     */
    public function addColumn(string $key, Column $column): Config;

    /**
     * Zwraca wszystkie kolumny dla danego DataGrid.
     */
    public function getColumns(): array;
}

interface State
{
    /**
     * Zwraca aktualna strone DataGrid do wyświetlenia
     */
    public function getCurrentPage(): int;

    /**
     * Klucz kolumny, po której będzie sortowany DataGrid.
     */
    public function getOrderBy(): string;

    /**
     * Czy dane mają zostać posortowane malejąco?
     */
    public function isOrderDesc(): bool;

    /**
     * Czy dane mają zostać posortowane rosnąco?
     */
    public function isOrderAsc(): bool;

    /**
     * Zwraca ilośc wierszy które mają zostać wyświetlone na jednej stronie.
     */
    public function getRowsPerPage(): int;
}

interface DataGrid
{
    /**
     * Zmienia aktualną konfigurację DataGrid.
     */
    public function withConfig(Config $config): DataGrid;

    /**
     * Ustawia dane, które mają zostać wyświetlone na ekranie.
     */
    public function withData(array $data): DataGrid;

    /**
     * Renderuje na ekran kod, który ma za zadanie wyświetlić przygotowany DataGrid.
     * Jako parametr przyjmuje: wszystkie dostępne dane, oraz aktualny stan DataGrid w formie obiektu.
     */
    public function render(array $rows, State $state): void;
}
</code>
    </pre>

    <h2>2. Typy danych</h2>

    <p>
        Każdy z podanych typów danych implementuje interfejs <code>DataType</code>. Wszystkie dodatkowe ustawienia,
        takie jak: precyzja, kod waluty, znaki itp. przekzujemy jako parametry konsturktora.
    </p>

    <p>
        <code>TextType</code> - domyślny typ. Renderuje ciąg znaków, jednak przefiltrowany,
        tak żeby nie można było wstawić kodu HTML lub JS.
    </p>

    <p>
        <code>NumberType</code> - typ do formatowania wartości liczbowych. Domyślne formatowanie:
        tysiące oddzielone spacjami, miejsce dziesiętne przecinkiem, dwa miejsca po przecinku zawsze widoczne.
        Możliwość skonfigurowania: dowolnego separatora (tysięcy i miejsca dziesiętnego), precyzji wyświetlania,
        metody zaokrąglania, włączenia / wyłączenia stałej ilości miejsc po przecinku.
    </p>

    <p>
        <code>MoneyType</code> - typ do formatowania wartości pieniężnych. Działa podobnie do NumberType,
        jednak dodatkowo na końcu wyświetla walutę.  Możliwość skonfigurowania: dowolnego separatora
        (tysięcy i miejsca dziesiętnego) oraz wyświetlania miejsc dziesiętnych (można wyłączyć aby nie pokazywać groszy).
    </p>

    <p>
        <code>DateTimeType</code> - formatuje date i czas. Możliwość wybrania formatu (zarówno dayt jak i godziny).
    </p>

    <p>
        <code>DateType</code> - formatuje date. Możliwość wyboru formatowania daty.
    </p>

    <p>
        <code>ImageType</code> - wstawia obrazek w znaczniku <code>img</code>. Domyślnie rozmiar obrazka to 16x16 px. Możliwość zmienienia tego rozmiaru.
    </p>

    <p>
        <code>LinkType</code> - Wstawia link do zasobu. Możliwośc wybrania znacznika <code>a</code> lub <code>button</code>,
        oraz klasy z Bootstrap 3 w celu zmiany koloru.
    </p>

    <p>
        <code>RawType</code> - Renderuje dokładnie ten sam ciąg znaków co w otrzymanych danych. Służy do wyświetlania HTML.
    </p>

    <h2>3. Przykład</h2>

    <p>
        <a href="https://pastebin.com/j5KCPctq">Data set, który ma zostać wykorzystany w przykładzie (JSON).</a>
    </p>

    <div class="col-sm-12">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Age</th>
                <th>Company</th>
                <th>Balance</th>
                <th>Phone</th>
                <th>Email</th>
            </tr>
            </thead>
            <tbody>
            <tr><td style='text-align: right;'>1</td><td>Celina Collins</td><td style='text-align: right;'>23</td><td>NETBOOK</td><td style='text-align: right;'>3 055,76 USD</td><td>+1 (855) 514-2949</td><td>celinacollins@netbook.com</td></tr><tr><td style='text-align: right;'>2</td><td>Brock Adams</td><td style='text-align: right;'>36</td><td>EWAVES</td><td style='text-align: right;'>3 324,40 USD</td><td>+1 (988) 489-3691</td><td>brockadams@ewaves.com</td></tr><tr><td style='text-align: right;'>3</td><td>Augusta Mccarty</td><td style='text-align: right;'>23</td><td>SONGBIRD</td><td style='text-align: right;'>3 266,87 USD</td><td>+1 (987) 470-3284</td><td>augustamccarty@songbird.com</td></tr><tr><td style='text-align: right;'>4</td><td>Beasley Rocha</td><td style='text-align: right;'>30</td><td>MARKETOID</td><td style='text-align: right;'>2 670,30 USD</td><td>+1 (845) 429-2442</td><td>beasleyrocha@marketoid.com</td></tr><tr><td style='text-align: right;'>5</td><td>Hayes Peters</td><td style='text-align: right;'>25</td><td>QUILCH</td><td style='text-align: right;'>3 164,32 USD</td><td>+1 (843) 491-2707</td><td>hayespeters@quilch.com</td></tr><tr><td style='text-align: right;'>6</td><td>Cotton Vincent</td><td style='text-align: right;'>34</td><td>NEPTIDE</td><td style='text-align: right;'>3 582,82 USD</td><td>+1 (956) 575-2083</td><td>cottonvincent@neptide.com</td></tr><tr><td style='text-align: right;'>7</td><td>Williams Bradshaw</td><td style='text-align: right;'>25</td><td>BOLAX</td><td style='text-align: right;'>3 823,66 USD</td><td>+1 (971) 531-2436</td><td>williamsbradshaw@bolax.com</td></tr><tr><td style='text-align: right;'>8</td><td>Holcomb Chan</td><td style='text-align: right;'>35</td><td>ANIVET</td><td style='text-align: right;'>3 054,39 USD</td><td>+1 (877) 523-3680</td><td>holcombchan@anivet.com</td></tr><tr><td style='text-align: right;'>9</td><td>Mabel Boyd</td><td style='text-align: right;'>31</td><td>ZILLANET</td><td style='text-align: right;'>2 018,92 USD</td><td>+1 (979) 552-3369</td><td>mabelboyd@zillanet.com</td></tr>            </tbody>
        </table>

        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <li class="page-item disabled">
                    <a class="page-link" href="#" tabindex="-1">Previous</a>
                </li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item"><a class="page-link" href="#">4</a></li>
                <li class="page-item">
                    <a class="page-link" href="#">Next</a>
                </li>
            </ul>
        </nav>
    </div>


    <script>hljs.initHighlightingOnLoad();</script>
</div>
</body>
</html>
